<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ã‚¢ãƒ—ãƒª - ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            background: #ffffff;
            color: #333;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }
        
        /* ã‚¿ãƒƒãƒæœ€é©åŒ– */
        button {
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
            user-select: none;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.8em;
            color: #000;
        }
        
        /* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .tab-nav {
            display: flex;
            gap: 0;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 30px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .tab-nav::-webkit-scrollbar {
            display: none;
        }
        
        .tab-button {
            flex: 1;
            min-width: 100px;
            padding: 15px 10px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1em;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab-button.active {
            color: #000;
            border-bottom-color: #000;
            font-weight: 600;
        }
        
        .tab-button:active {
            opacity: 0.7;
        }
        
        /* ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* éŸ³å£°å…¥åŠ›ãƒœã‚¿ãƒ³ */
        .voice-button {
            width: 100%;
            padding: 18px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .voice-button:hover {
            background: #000;
            color: #fff;
        }
        
        .voice-button:active {
            transform: scale(0.98);
        }
        
        .voice-button.listening {
            background: #000;
            color: #fff;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* ã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³ - æœ€é‡è¦éƒ¨åˆ† */
        .quick-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .quick-button {
            padding: 12px 8px;
            background: #fff;
            border: 1px solid #333;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .quick-button:hover {
            background: #f5f5f5;
            border-color: #000;
        }
        
        .quick-button:active {
            background: #000;
            color: #fff;
            transform: scale(0.95);
        }
        
        /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */
        .text-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 15px;
        }
        
        .text-input:focus {
            outline: none;
            border-color: #000;
            border-width: 2px;
        }
        
        /* è¿½åŠ ãƒœã‚¿ãƒ³ */
        .add-button {
            width: 100%;
            padding: 14px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .add-button:active {
            transform: scale(0.98);
            opacity: 0.9;
        }
        
        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º */
        .status {
            text-align: center;
            padding: 10px;
            color: #666;
            font-size: 0.9em;
        }
        
        /* ãƒ­ã‚°è¡¨ç¤º */
        .logs-section {
            margin-top: 30px;
        }
        
        .section-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #000;
        }
        
        .log-item {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }
        
        .log-item:hover {
            border-color: #000;
        }
        
        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5em;
                margin-bottom: 20px;
            }
            
            .tab-button {
                min-width: 80px;
                padding: 12px 8px;
                font-size: 0.9em;
            }
            
            .voice-button {
                padding: 16px;
                font-size: 1em;
            }
            
            /* ã‚¹ãƒãƒ›ã§ã‚‚ç¢ºå®Ÿã«4åˆ—è¡¨ç¤º */
            .quick-buttons {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 8px;
            }
            
            .quick-button {
                padding: 10px 5px;
                font-size: 0.85em;
                min-height: 48px;
            }
        }
        
        /* è¶…å°å‹ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 375px) {
            .quick-button {
                padding: 8px 4px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ãƒ©ã‚¤ãƒ•ãƒ­ã‚°</h1>
        
        <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('activity')">â±ï¸ è¡Œå‹•</button>
            <button class="tab-button" onclick="switchTab('money')">ğŸ’° ãŠé‡‘</button>
            <button class="tab-button" onclick="switchTab('weight')">âš–ï¸ ä½“é‡</button>
            <button class="tab-button" onclick="switchTab('journal')">ğŸ“” ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«</button>
        </div>
        
        <!-- è¡Œå‹•ã‚¿ãƒ– -->
        <div id="activity" class="tab-content active">
            <button id="activityVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§è¨˜éŒ²</button>
            
            <div class="quick-buttons">
                <button class="quick-button" onclick="quickAddActivity('ä»•äº‹')">ğŸ’¼ ä»•äº‹</button>
                <button class="quick-button" onclick="quickAddActivity('å‹‰å¼·')">ğŸ“š å‹‰å¼·</button>
                <button class="quick-button" onclick="quickAddActivity('é‹å‹•')">ğŸƒ é‹å‹•</button>
                <button class="quick-button" onclick="quickAddActivity('é£Ÿäº‹')">ğŸ½ï¸ é£Ÿäº‹</button>
                <button class="quick-button" onclick="quickAddActivity('ç¡çœ ')">ğŸ˜´ ç¡çœ </button>
                <button class="quick-button" onclick="quickAddActivity('èª­æ›¸')">ğŸ“– èª­æ›¸</button>
                <button class="quick-button" onclick="quickAddActivity('å®¶äº‹')">ğŸ§¹ å®¶äº‹</button>
                <button class="quick-button" onclick="quickAddActivity('è¶£å‘³')">ğŸ¨ è¶£å‘³</button>
            </div>
            
            <input type="text" id="activityInput" class="text-input" placeholder="æ´»å‹•å†…å®¹ã‚’å…¥åŠ›...">
            <button class="add-button" onclick="addActivity()">â• è¨˜éŒ²</button>
            <div id="activityStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ä»Šæ—¥ã®è¡Œå‹•</h2>
                <div id="activityLogs"></div>
            </div>
        </div>
        
        <!-- ãŠé‡‘ã‚¿ãƒ– -->
        <div id="money" class="tab-content">
            <button id="moneyVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§è¨˜éŒ²</button>
            
            <div class="quick-buttons">
                <button class="quick-button" onclick="quickAddMoney('åå…¥', 1000)">ğŸ’° åå…¥</button>
                <button class="quick-button" onclick="quickAddMoney('æ”¯å‡º', -500)">ğŸ’¸ æ”¯å‡º</button>
                <button class="quick-button" onclick="quickAddMoney('é£Ÿè²»', -800)">ğŸ½ï¸ é£Ÿè²»</button>
                <button class="quick-button" onclick="quickAddMoney('äº¤é€šè²»', -300)">ğŸšƒ äº¤é€š</button>
                <button class="quick-button" onclick="quickAddMoney('å¨¯æ¥½', -1000)">ğŸ® å¨¯æ¥½</button>
                <button class="quick-button" onclick="quickAddMoney('å…‰ç†±è²»', -5000)">ğŸ’¡ å…‰ç†±è²»</button>
                <button class="quick-button" onclick="quickAddMoney('é€šä¿¡è²»', -3000)">ğŸ“± é€šä¿¡</button>
                <button class="quick-button" onclick="quickAddMoney('ãã®ä»–', -500)">ğŸ“Œ ãã®ä»–</button>
            </div>
            
            <input type="text" id="moneyInput" class="text-input" placeholder="å†…å®¹ã‚’å…¥åŠ›...">
            <input type="number" id="moneyAmount" class="text-input" placeholder="é‡‘é¡ï¼ˆå††ï¼‰">
            <button class="add-button" onclick="addMoney()">â• è¨˜éŒ²</button>
            <div id="moneyStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ä»Šæ—¥ã®ãŠé‡‘</h2>
                <div id="moneyLogs"></div>
            </div>
        </div>
        
        <!-- ä½“é‡ã‚¿ãƒ– -->
        <div id="weight" class="tab-content">
            <button id="weightVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§è¨˜éŒ²</button>
            
            <input type="number" step="0.1" id="weightInput" class="text-input" placeholder="ä½“é‡ï¼ˆkgï¼‰">
            <button class="add-button" onclick="addWeight()">â• è¨˜éŒ²</button>
            <div id="weightStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ä½“é‡å±¥æ­´</h2>
                <div id="weightLogs"></div>
            </div>
        </div>
        
        <!-- ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã‚¿ãƒ– -->
        <div id="journal" class="tab-content">
            <button id="journalVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§æŒ¯ã‚Šè¿”ã‚Š</button>
            
            <textarea id="journalInput" class="text-input" style="min-height: 150px; resize: vertical;" placeholder="ä»Šæ—¥ã®æŒ¯ã‚Šè¿”ã‚Šã‚’æ›¸ãã¾ã—ã‚‡ã†..."></textarea>
            <button class="add-button" onclick="addJournal()">ğŸ“ ä¿å­˜</button>
            <div id="journalStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«å±¥æ­´</h2>
                <div id="journalLogs"></div>
            </div>
        </div>
    </div>
    
    <script>
        // ãƒ‡ãƒ¼ã‚¿æ ¼ç´
        let activities = JSON.parse(localStorage.getItem('activities') || '[]');
        let moneyRecords = JSON.parse(localStorage.getItem('moneyRecords') || '[]');
        let weightRecords = JSON.parse(localStorage.getItem('weightRecords') || '[]');
        let journals = JSON.parse(localStorage.getItem('journals') || '[]');
        
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã¨ãƒœã‚¿ãƒ³ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã¨ãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // ã‚¯ã‚¤ãƒƒã‚¯è¿½åŠ ï¼šè¡Œå‹•
        function quickAddActivity(activity) {
            document.getElementById('activityInput').value = activity;
            addActivity();
        }
        
        // ã‚¯ã‚¤ãƒƒã‚¯è¿½åŠ ï¼šãŠé‡‘
        function quickAddMoney(category, amount) {
            document.getElementById('moneyInput').value = category;
            document.getElementById('moneyAmount').value = Math.abs(amount);
            addMoney();
        }
        
        // è¡Œå‹•ã‚’è¨˜éŒ²
        function addActivity() {
            const input = document.getElementById('activityInput');
            const text = input.value.trim();
            
            if (!text) {
                showStatus('activityStatus', 'âŒ å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const record = {
                id: Date.now(),
                text: text,
                timestamp: new Date().toISOString()
            };
            
            activities.unshift(record);
            localStorage.setItem('activities', JSON.stringify(activities));
            
            input.value = '';
            showStatus('activityStatus', 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸ');
            renderActivityLogs();
        }
        
        // ãŠé‡‘ã‚’è¨˜éŒ²
        function addMoney() {
            const input = document.getElementById('moneyInput');
            const amountInput = document.getElementById('moneyAmount');
            const text = input.value.trim();
            const amount = parseFloat(amountInput.value);
            
            if (!text || isNaN(amount)) {
                showStatus('moneyStatus', 'âŒ å†…å®¹ã¨é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const record = {
                id: Date.now(),
                text: text,
                amount: amount,
                timestamp: new Date().toISOString()
            };
            
            moneyRecords.unshift(record);
            localStorage.setItem('moneyRecords', JSON.stringify(moneyRecords));
            
            input.value = '';
            amountInput.value = '';
            showStatus('moneyStatus', 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸ');
            renderMoneyLogs();
        }
        
        // ä½“é‡ã‚’è¨˜éŒ²
        function addWeight() {
            const input = document.getElementById('weightInput');
            const weight = parseFloat(input.value);
            
            if (isNaN(weight) || weight <= 0) {
                showStatus('weightStatus', 'âŒ æ­£ã—ã„ä½“é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const record = {
                id: Date.now(),
                weight: weight,
                timestamp: new Date().toISOString()
            };
            
            weightRecords.unshift(record);
            localStorage.setItem('weightRecords', JSON.stringify(weightRecords));
            
            input.value = '';
            showStatus('weightStatus', 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸ');
            renderWeightLogs();
        }
        
        // ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã‚’ä¿å­˜
        function addJournal() {
            const input = document.getElementById('journalInput');
            const text = input.value.trim();
            
            if (!text) {
                showStatus('journalStatus', 'âŒ å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const record = {
                id: Date.now(),
                text: text,
                timestamp: new Date().toISOString()
            };
            
            journals.unshift(record);
            localStorage.setItem('journals', JSON.stringify(journals));
            
            input.value = '';
            showStatus('journalStatus', 'âœ“ ä¿å­˜ã—ã¾ã—ãŸ');
            renderJournalLogs();
        }
        
        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
        function showStatus(elementId, message) {
            const statusEl = document.getElementById(elementId);
            statusEl.textContent = message;
            setTimeout(() => {
                statusEl.textContent = '';
            }, 3000);
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šè¡Œå‹•
        function renderActivityLogs() {
            const container = document.getElementById('activityLogs');
            if (activities.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            container.innerHTML = activities.map(record => `
                <div class="log-item">
                    <strong>${record.text}</strong>
                    <br>
                    <small>${new Date(record.timestamp).toLocaleString('ja-JP')}</small>
                </div>
            `).join('');
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šãŠé‡‘
        function renderMoneyLogs() {
            const container = document.getElementById('moneyLogs');
            if (moneyRecords.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            container.innerHTML = moneyRecords.map(record => `
                <div class="log-item">
                    <strong>${record.text}</strong> - Â¥${record.amount.toLocaleString()}
                    <br>
                    <small>${new Date(record.timestamp).toLocaleString('ja-JP')}</small>
                </div>
            `).join('');
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šä½“é‡
        function renderWeightLogs() {
            const container = document.getElementById('weightLogs');
            if (weightRecords.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            container.innerHTML = weightRecords.map(record => `
                <div class="log-item">
                    <strong>${record.weight} kg</strong>
                    <br>
                    <small>${new Date(record.timestamp).toLocaleString('ja-JP')}</small>
                </div>
            `).join('');
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šã‚¸ãƒ£ãƒ¼ãƒŠãƒ«
        function renderJournalLogs() {
            const container = document.getElementById('journalLogs');
            if (journals.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            container.innerHTML = journals.map(record => `
                <div class="log-item">
                    <div style="white-space: pre-wrap;">${record.text}</div>
                    <br>
                    <small>${new Date(record.timestamp).toLocaleString('ja-JP')}</small>
                </div>
            `).join('');
        }
        
        // éŸ³å£°èªè­˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        function setupVoiceRecognition(buttonId, callback) {
            const button = document.getElementById(buttonId);
            if (!button) return;
            
            if (!('webkitSpeechRecognition' in window)) {
                button.disabled = true;
                button.textContent = 'éŸ³å£°èªè­˜ã¯éå¯¾å¿œã§ã™';
                return;
            }
            
            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'ja-JP';
            recognition.continuous = true;
            recognition.interimResults = true;
            
            let isListening = false;
            
            button.addEventListener('click', () => {
                if (isListening) {
                    recognition.stop();
                    button.classList.remove('listening');
                    button.textContent = button.textContent.replace('ğŸ”´', 'ğŸ¤').replace('åœæ­¢', 'éŸ³å£°å…¥åŠ›');
                    isListening = false;
                } else {
                    recognition.start();
                    button.classList.add('listening');
                    button.textContent = button.textContent.replace('ğŸ¤', 'ğŸ”´').replace('éŸ³å£°å…¥åŠ›', 'åœæ­¢');
                    isListening = true;
                }
            });
            
            recognition.onresult = (event) => {
                const transcript = Array.from(event.results)
                    .map(result => result[0].transcript)
                    .join('');
                callback(transcript);
            };
            
            recognition.onerror = (event) => {
                console.error('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼:', event.error);
                button.classList.remove('listening');
                isListening = false;
            };
            
            recognition.onend = () => {
                button.classList.remove('listening');
                button.textContent = button.textContent.replace('ğŸ”´', 'ğŸ¤').replace('åœæ­¢', 'éŸ³å£°å…¥åŠ›');
                isListening = false;
            };
        }
        
        // éŸ³å£°èªè­˜ã‚’å„ãƒœã‚¿ãƒ³ã«è¨­å®š
        setupVoiceRecognition('activityVoiceButton', (transcript) => {
            document.getElementById('activityInput').value = transcript;
        });
        
        setupVoiceRecognition('moneyVoiceButton', (transcript) => {
            document.getElementById('moneyInput').value = transcript;
        });
        
        setupVoiceRecognition('weightVoiceButton', (transcript) => {
            const weight = transcript.match(/[\d.]+/);
            if (weight) {
                document.getElementById('weightInput').value = weight[0];
            }
        });
        
        setupVoiceRecognition('journalVoiceButton', (transcript) => {
            document.getElementById('journalInput').value = transcript;
        });
        
        // åˆæœŸè¡¨ç¤º
        renderActivityLogs();
        renderMoneyLogs();
        renderWeightLogs();
        renderJournalLogs();
    </script>
</body>
</html>
