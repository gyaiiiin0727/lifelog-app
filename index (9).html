<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ã‚¢ãƒ—ãƒª v9.1</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            background: #ffffff;
            color: #333;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }
        
        button {
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
            user-select: none;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.8em;
            color: #000;
        }
        
        .tab-nav {
            display: flex;
            gap: 0;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 30px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .tab-nav::-webkit-scrollbar {
            display: none;
        }
        
        .tab-button {
            flex: 1;
            min-width: 80px;
            padding: 15px 10px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 0.95em;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab-button.active {
            color: #000;
            border-bottom-color: #000;
            font-weight: 600;
        }
        
        .tab-button:active {
            opacity: 0.7;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .voice-button {
            width: 100%;
            padding: 18px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .voice-button:hover {
            background: #000;
            color: #fff;
        }
        
        .voice-button:active {
            transform: scale(0.98);
        }
        
        .voice-button.listening {
            background: #000;
            color: #fff;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .quick-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .quick-button {
            padding: 12px 8px;
            background: #fff;
            border: 1px solid #333;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .quick-button:hover {
            background: #f5f5f5;
            border-color: #000;
        }
        
        .quick-button:active {
            background: #000;
            color: #fff;
            transform: scale(0.95);
        }
        
        .text-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 15px;
        }
        
        .text-input:focus {
            outline: none;
            border-color: #000;
            border-width: 2px;
        }
        
        textarea.text-input {
            min-height: 150px;
            resize: vertical;
            font-family: inherit;
        }
        
        .add-button {
            width: 100%;
            padding: 14px;
            background: #000;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .add-button:active {
            transform: scale(0.98);
            opacity: 0.9;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            color: #666;
            font-size: 0.9em;
        }
        
        .logs-section {
            margin-top: 30px;
        }
        
        .section-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .log-item {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }
        
        .log-item:hover {
            border-color: #000;
        }
        
        /* ã‚«ãƒ†ã‚´ãƒªç®¡ç†ãƒœã‚¿ãƒ³ */
        .manage-button {
            padding: 8px 15px;
            background: #fff;
            color: #000;
            border: 1px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
        }
        
        .manage-button:hover {
            background: #000;
            color: #fff;
        }
        
        /* æ°—åˆ†é¸æŠ */
        .mood-selector {
            margin: 20px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
        }
        
        .mood-selector-title {
            font-size: 1em;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            color: #000;
        }
        
        .mood-buttons {
            display: flex;
            justify-content: space-around;
            gap: 10px;
        }
        
        .mood-button {
            flex: 1;
            padding: 15px 5px;
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .mood-button:hover {
            border-color: #666;
            transform: translateY(-2px);
        }
        
        .mood-button.selected {
            border-color: #000;
            background: #f0f8ff;
            border-width: 3px;
        }
        
        .mood-emoji {
            font-size: 2em;
        }
        
        .mood-label {
            font-size: 0.8em;
            color: #666;
            font-weight: 500;
        }
        
        .mood-button.selected .mood-label {
            color: #000;
            font-weight: 600;
        }
        
        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: #fff;
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #000;
        }
        
        .modal-close {
            float: right;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
        }
        
        .modal-close:hover {
            color: #000;
        }
        
        /* ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .summary-section {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
        }
        
        .summary-section.active {
            display: block;
        }
        
        .summary-item {
            margin-bottom: 20px;
        }
        
        .summary-label {
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 8px;
            color: #000;
        }
        
        .summary-content {
            padding: 12px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            min-height: 60px;
            white-space: pre-wrap;
        }
        
        .ai-comment {
            margin-top: 10px;
            padding: 12px;
            background: #f0f8ff;
            border-left: 4px solid #000;
            border-radius: 4px;
            font-size: 0.9em;
            color: #333;
        }
        
        .ai-comment::before {
            content: 'ğŸ’¬ AIã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ: ';
            font-weight: 600;
            display: block;
            margin-bottom: 5px;
        }
        
        /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ */
        .calendar {
            margin-top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-nav {
            padding: 8px 15px;
            background: #fff;
            border: 1px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
        }
        
        .calendar-nav:active {
            background: #000;
            color: #fff;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            padding: 10px 5px;
            font-size: 0.9em;
            color: #666;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            background: #fff;
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            border-color: #000;
        }
        
        .calendar-day.today {
            background: #000;
            color: #fff;
            font-weight: 600;
        }
        
        .calendar-day.has-journal {
            background: #f0f8ff;
            border-color: #666;
        }
        
        .calendar-day.today.has-journal {
            background: #000;
            color: #fff;
        }
        
        .calendar-day.empty {
            background: transparent;
            border: none;
            cursor: default;
        }
        
        .calendar-day-mood {
            font-size: 1.2em;
            margin-top: 2px;
        }
        
        /* ãƒ¬ãƒãƒ¼ãƒˆ */
        .chart-container {
            margin: 20px 0;
            padding: 20px;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            padding: 15px;
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: 600;
            color: #000;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        
        /* AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
        .ai-feedback-container {
            margin: 20px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            border: 2px solid #000;
        }
        
        .ai-feedback-title {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feedback-section {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
        }
        
        .feedback-section h4 {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            color: #000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .feedback-item {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95em;
        }
        
        .feedback-icon {
            font-size: 1.2em;
        }
        
        .ai-advice-box {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #000;
            margin: 15px 0;
            line-height: 1.8;
        }
        
        .ai-advice-box::before {
            content: 'ğŸ’¬ AIã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹';
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #000;
        }
        
        .goals-list {
            list-style: none;
            padding: 0;
        }
        
        .goals-list li {
            padding: 10px;
            margin: 8px 0;
            background: #f9f9f9;
            border-radius: 6px;
            border-left: 3px solid #000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .goals-list li::before {
            content: 'â€¢';
            font-size: 1.5em;
            color: #000;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5em;
                margin-bottom: 20px;
            }
            
            .tab-button {
                min-width: 70px;
                padding: 12px 8px;
                font-size: 0.85em;
            }
            
            .voice-button {
                padding: 16px;
                font-size: 1em;
            }
            
            .quick-buttons {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 8px;
            }
            
            .quick-button {
                padding: 10px 5px;
                font-size: 0.85em;
                min-height: 48px;
            }
            
            .modal-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ãƒ©ã‚¤ãƒ•ãƒ­ã‚° v9.7</h1>
        
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('activity')">â±ï¸ è¡Œå‹•</button>
            <button class="tab-button" onclick="switchTab('money')">ğŸ’° ãŠé‡‘</button>
            <button class="tab-button" onclick="switchTab('weight')">âš–ï¸ ä½“é‡</button>
            <button class="tab-button" onclick="switchTab('journal')">ğŸ“” ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«</button>
            <button class="tab-button" onclick="switchTab('report')">ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆ</button>
        </div>
        
        <!-- è¡Œå‹•ã‚¿ãƒ– -->
        <div id="activity" class="tab-content active">
            <button id="activityVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§è¨˜éŒ²</button>
            
            <div id="activityQuickButtons" class="quick-buttons"></div>
            
            <input type="text" id="activityInput" class="text-input" placeholder="æ´»å‹•å†…å®¹ã‚’å…¥åŠ›...">
            
            <!-- æ™‚é–“è¨˜éŒ²æ©Ÿèƒ½ -->
            <div class="time-input-section" style="margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 12px;">
                <div style="font-weight: 600; margin-bottom: 10px; color: #000;">â±ï¸ æ™‚é–“ã‚’è¨˜éŒ²</div>
                
                <!-- ã‚¿ã‚¤ãƒãƒ¼æ–¹å¼ -->
                <div style="margin-bottom: 15px;">
                    <button id="timerButton" class="add-button" onclick="toggleTimer()" style="background: #4CAF50; width: 100%;">
                        â–¶ï¸ ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
                    </button>
                    <div id="timerDisplay" style="text-align: center; font-size: 1.5em; font-weight: 600; margin-top: 10px; color: #000;">00:00:00</div>
                </div>
                
                <div style="text-align: center; margin: 15px 0; color: #999;">ã¾ãŸã¯</div>
                
                <!-- æ‰‹å‹•å…¥åŠ›æ–¹å¼ -->
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="hourInput" class="text-input" placeholder="æ™‚é–“" min="0" style="flex: 1;">
                    <input type="number" id="minuteInput" class="text-input" placeholder="åˆ†" min="0" max="59" style="flex: 1;">
                </div>
            </div>
            
            <button class="add-button" onclick="addActivity()">â• è¨˜éŒ²</button>
            <div id="activityStatus" class="status"></div>
            
            <div class="logs-section">
                <div class="section-title">
                    <span>ä»Šæ—¥ã®è¡Œå‹•</span>
                    <button class="manage-button" onclick="openCategoryManager()">âš™ï¸ ã‚«ãƒ†ã‚´ãƒªç®¡ç†</button>
                </div>
                <div id="activityLogs"></div>
            </div>
        </div>
        
        <!-- ãŠé‡‘ã‚¿ãƒ– -->
        <div id="money" class="tab-content">
            <button id="moneyVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§è¨˜éŒ²</button>
            
            <div class="quick-buttons">
                <button class="quick-button" onclick="quickAddMoney('åå…¥', 10000)">ğŸ’° åå…¥</button>
                <button class="quick-button" onclick="quickAddMoney('æ”¯å‡º', -500)">ğŸ’¸ æ”¯å‡º</button>
                <button class="quick-button" onclick="quickAddMoney('é£Ÿè²»', -800)">ğŸ½ï¸ é£Ÿè²»</button>
                <button class="quick-button" onclick="quickAddMoney('äº¤é€šè²»', -300)">ğŸšƒ äº¤é€š</button>
                <button class="quick-button" onclick="quickAddMoney('å¨¯æ¥½', -1000)">ğŸ® å¨¯æ¥½</button>
                <button class="quick-button" onclick="quickAddMoney('å…‰ç†±è²»', -5000)">ğŸ’¡ å…‰ç†±è²»</button>
                <button class="quick-button" onclick="quickAddMoney('é€šä¿¡è²»', -3000)">ğŸ“± é€šä¿¡</button>
                <button class="quick-button" onclick="quickAddMoney('ãã®ä»–', -500)">ğŸ“Œ ãã®ä»–</button>
            </div>
            
            <input type="text" id="moneyInput" class="text-input" placeholder="å†…å®¹ã‚’å…¥åŠ›...">
            <input type="number" id="moneyAmount" class="text-input" placeholder="é‡‘é¡ï¼ˆå††ï¼‰">
            <button class="add-button" onclick="addMoney()">â• è¨˜éŒ²</button>
            <div id="moneyStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ä»Šæ—¥ã®ãŠé‡‘</h2>
                <div id="moneyLogs"></div>
            </div>
        </div>
        
        <!-- ä½“é‡ã‚¿ãƒ– -->
        <div id="weight" class="tab-content">
            <button id="weightVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§è¨˜éŒ²</button>
            
            <input type="number" step="0.1" id="weightInput" class="text-input" placeholder="ä½“é‡ï¼ˆkgï¼‰">
            <button class="add-button" onclick="addWeight()">â• è¨˜éŒ²</button>
            <div id="weightStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ä½“é‡å±¥æ­´</h2>
                <div id="weightLogs"></div>
            </div>
        </div>
        
        <!-- ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã‚¿ãƒ– -->
        <div id="journal" class="tab-content">
            <button id="journalVoiceButton" class="voice-button">ğŸ¤ éŸ³å£°å…¥åŠ›ã§æŒ¯ã‚Šè¿”ã‚Š</button>
            
            <!-- æ°—åˆ†é¸æŠ -->
            <div class="mood-selector">
                <div class="mood-selector-title">ä»Šæ—¥ã®æ°—åˆ†ã‚’é¸ã‚“ã§ãã ã•ã„</div>
                <div class="mood-buttons">
                    <button class="mood-button" onclick="selectMood('great')" data-mood="great">
                        <span class="mood-emoji">ğŸ˜Š</span>
                        <span class="mood-label">æœ€é«˜</span>
                    </button>
                    <button class="mood-button" onclick="selectMood('good')" data-mood="good">
                        <span class="mood-emoji">ğŸ™‚</span>
                        <span class="mood-label">è‰¯ã„</span>
                    </button>
                    <button class="mood-button" onclick="selectMood('normal')" data-mood="normal">
                        <span class="mood-emoji">ğŸ˜</span>
                        <span class="mood-label">æ™®é€š</span>
                    </button>
                    <button class="mood-button" onclick="selectMood('bad')" data-mood="bad">
                        <span class="mood-emoji">ğŸ˜”</span>
                        <span class="mood-label">æ‚ªã„</span>
                    </button>
                    <button class="mood-button" onclick="selectMood('terrible')" data-mood="terrible">
                        <span class="mood-emoji">ğŸ˜¢</span>
                        <span class="mood-label">æœ€æ‚ª</span>
                    </button>
                </div>
            </div>
            
            <textarea id="journalInput" class="text-input" placeholder="ä»Šæ—¥ã®æŒ¯ã‚Šè¿”ã‚Šã‚’æ›¸ãã¾ã—ã‚‡ã†...&#10;&#10;ä¾‹ï¼š&#10;æœã‹ã‚‰ã‚¸ãƒ ã«è¡Œã£ã¦æ°—æŒã¡ã‚ˆãæ±—ã‚’æµã—ãŸã€‚&#10;åˆå¾Œã¯é›†ä¸­ã—ã¦ä»•äº‹ãŒã§ããŸã€‚&#10;æ˜æ—¥ã¯æ—©èµ·ãã—ã¦æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å–ã‚Šçµ„ã‚‚ã†ã€‚"></textarea>
            
            <!-- è‡ªå‹•è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="summarySection" class="summary-section">
                <h3 style="margin-bottom: 15px;">ğŸ“ è‡ªå‹•è¦ç´„</h3>
                
                <div class="summary-item">
                    <div class="summary-label">ğŸ˜Š Goodï¼ˆè‰¯ã‹ã£ãŸã“ã¨ï¼‰</div>
                    <div id="summaryGood" class="summary-content"></div>
                    <div id="commentGood" class="ai-comment"></div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-label">ğŸ“ˆ Moreï¼ˆã‚‚ã£ã¨è‰¯ãã§ãã‚‹ã“ã¨ï¼‰</div>
                    <div id="summaryMore" class="summary-content"></div>
                    <div id="commentMore" class="ai-comment"></div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-label">ğŸ¤” æ‚©ã‚“ã§ã„ã‚‹ã“ã¨</div>
                    <div id="summaryWorry" class="summary-content"></div>
                    <div id="commentWorry" class="ai-comment"></div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-label">âœ… æ˜æ—¥ã®ã‚¿ã‚¹ã‚¯</div>
                    <div id="summaryTask" class="summary-content"></div>
                    <div id="commentTask" class="ai-comment"></div>
                </div>
            </div>
            
            <button class="add-button" onclick="addJournal()">ğŸ“ ä¿å­˜</button>
            <div id="journalStatus" class="status"></div>
            
            <div class="logs-section">
                <h2 class="section-title">ğŸ“… æœˆé–“ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h2>
                <div class="calendar">
                    <div class="calendar-header">
                        <button class="calendar-nav" onclick="changeMonth(-1)">â—€ å‰æœˆ</button>
                        <span id="calendarMonth" style="font-weight: 600;"></span>
                        <button class="calendar-nav" onclick="changeMonth(1)">æ¬¡æœˆ â–¶</button>
                    </div>
                    <div id="calendar" class="calendar-grid"></div>
                </div>
                
                <h2 class="section-title" style="margin-top: 30px;">ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«å±¥æ­´</h2>
                <div id="journalLogs"></div>
            </div>
        </div>
        
        <!-- ãƒ¬ãƒãƒ¼ãƒˆã‚¿ãƒ– -->
        <div id="report" class="tab-content">
            <h2 class="section-title">ğŸ“Š çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆ</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalActivities">0</div>
                    <div class="stat-label">ç·è¡Œå‹•æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalMoney">Â¥0</div>
                    <div class="stat-label">åæ”¯åˆè¨ˆ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalJournals">0</div>
                    <div class="stat-label">ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgWeight">-</div>
                    <div class="stat-label">å¹³å‡ä½“é‡</div>
                </div>
            </div>
            
            <!-- AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ -->
            <div class="ai-feedback-container">
                <div class="ai-feedback-title">
                    <span>ğŸ¤–</span>
                    <span>AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</span>
                </div>
                
                <div class="feedback-section">
                    <h4>ğŸ“Š ä»Šé€±ã®åˆ†æ</h4>
                    <div id="weeklyAnalysis"></div>
                </div>
                
                <div class="feedback-section">
                    <h4>ğŸ¯ è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³</h4>
                    <div id="activityPattern"></div>
                </div>
                
                <div class="feedback-section">
                    <h4>ğŸ˜Š æ°—åˆ†ã®å‚¾å‘</h4>
                    <div id="moodTrend"></div>
                </div>
                
                <div class="ai-advice-box" id="aiAdvice"></div>
                
                <div class="feedback-section">
                    <h4>ğŸŒŸ æ¥é€±ã®ç›®æ¨™ææ¡ˆ</h4>
                    <ul class="goals-list" id="weeklyGoals"></ul>
                </div>
            </div>
            
            <div class="chart-container">
                <h3 style="margin-bottom: 15px;">è¡Œå‹•ã‚«ãƒ†ã‚´ãƒªåˆ¥</h3>
                <canvas id="activityChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3 style="margin-bottom: 15px;">æ°—åˆ†ã®åˆ†å¸ƒ</h3>
                <canvas id="moodChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3 style="margin-bottom: 15px;">ãŠé‡‘ã®æ¨ç§»</h3>
                <canvas id="moneyChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3 style="margin-bottom: 15px;">ä½“é‡ã®æ¨ç§»</h3>
                <canvas id="weightChart"></canvas>
            </div>
        </div>
    </div>
    
    
    <!-- è¡Œå‹•ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="editActivityModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeEditActivityModal()">&times;</span>
            <h2 class="modal-title">âœï¸ è¡Œå‹•ã‚’ç·¨é›†</h2>
            
            <label style="font-size: 0.9em; color: #666; margin-bottom: 5px; display: block;">ã‚«ãƒ†ã‚´ãƒª</label>
            <select id="editActivityCategory" class="text-input" style="width: 100%; padding: 12px;">
                <!-- ã‚«ãƒ†ã‚´ãƒªã¯å‹•çš„ã«ç”Ÿæˆ -->
            </select>
            
            <label style="font-size: 0.9em; color: #666; margin-bottom: 5px; display: block; margin-top: 15px;">å†…å®¹</label>
            <input type="text" id="editActivityText" class="text-input" placeholder="è¡Œå‹•å†…å®¹">
            
            <label style="font-size: 0.9em; color: #666; margin-bottom: 5px; display: block; margin-top: 15px;">é–‹å§‹æ™‚åˆ»</label>
            <input type="datetime-local" id="editActivityStartTime" class="text-input">
            
            <label style="font-size: 0.9em; color: #666; margin-bottom: 5px; display: block; margin-top: 15px;">çµ‚äº†æ™‚åˆ»</label>
            <input type="datetime-local" id="editActivityEndTime" class="text-input">
            <small style="color: #999; display: block; margin-top: 5px;">ç¶™ç¶šä¸­ã®å ´åˆã¯ç©ºæ¬„ã«ã—ã¦ãã ã•ã„</small>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="add-button" onclick="closeEditActivityModal()" style="flex: 1; background: #999;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="add-button" onclick="saveEditActivity()" style="flex: 1;">ä¿å­˜</button>
            </div>
        </div>
    </div>
    <!-- ã‚«ãƒ†ã‚´ãƒªç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeCategoryManager()">&times;</span>
            <h2 class="modal-title">âš™ï¸ ã‚«ãƒ†ã‚´ãƒªç®¡ç†</h2>
            
            <div style="margin-bottom: 20px;">
                <input type="text" id="newCategoryName" class="text-input" placeholder="æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªåï¼ˆä¾‹ï¼šèª­æ›¸ï¼‰">
                <input type="text" id="newCategoryEmoji" class="text-input" placeholder="çµµæ–‡å­—ï¼ˆä¾‹ï¼šğŸ“–ï¼‰">
                <button class="add-button" onclick="addCategory()">â• è¿½åŠ </button>
            </div>
            
            <h3 style="margin-bottom: 10px;">ç¾åœ¨ã®ã‚«ãƒ†ã‚´ãƒª</h3>
            <div id="categoryList"></div>
        </div>
    </div>
    
    <script>
        // ãƒ‡ãƒ¼ã‚¿æ ¼ç´
        let activities = JSON.parse(localStorage.getItem('activities') || '[]');
        let moneyRecords = JSON.parse(localStorage.getItem('moneyRecords') || '[]');
        let weightRecords = JSON.parse(localStorage.getItem('weightRecords') || '[]');
        let journals = JSON.parse(localStorage.getItem('journals') || '[]');
        
        // ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ†ã‚´ãƒª
        let activityCategories = JSON.parse(localStorage.getItem('activityCategories') || JSON.stringify([
            { name: 'ä»•äº‹', emoji: 'ğŸ’¼' },
            { name: 'å‹‰å¼·', emoji: 'ğŸ“š' },
            { name: 'é‹å‹•', emoji: 'ğŸƒ' },
            { name: 'é£Ÿäº‹', emoji: 'ğŸ½ï¸' },
            { name: 'ç¡çœ ', emoji: 'ğŸ˜´' },
            { name: 'èª­æ›¸', emoji: 'ğŸ“–' },
            { name: 'å®¶äº‹', emoji: 'ğŸ§¹' },
            { name: 'è¶£å‘³', emoji: 'ğŸ¨' }
        ]));
        
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”¨
        let currentCalendarDate = new Date();
        
        // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹æ°—åˆ†
        let selectedMood = 'normal';
        
        // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚«ãƒ†ã‚´ãƒª
        let selectedCategory = null;
        let selectedCategoryEmoji = null;
        
        // ç·¨é›†ä¸­ID
        let editingActivityId = null;
        
        // ã‚¿ã‚¤ãƒãƒ¼é–¢é€£
        let timerStartTime = null;
        let timerInterval = null;
        let timerRunning = false;
        let timerElapsedSeconds = 0;
        
        // æ°—åˆ†ã®çµµæ–‡å­—ãƒãƒƒãƒ”ãƒ³ã‚°
        const moodEmojis = {
            great: 'ğŸ˜Š',
            good: 'ğŸ™‚',
            normal: 'ğŸ˜',
            bad: 'ğŸ˜”',
            terrible: 'ğŸ˜¢'
        };
        
        // æ°—åˆ†é¸æŠ
        function selectMood(mood) {
            selectedMood = mood;
            
            // ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.mood-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            const selectedButton = document.querySelector(`.mood-button[data-mood="${mood}"]`);
            if (selectedButton) {
                selectedButton.classList.add('selected');
            }
        }
        
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'journal') {
                renderCalendar();
            } else if (tabName === 'report') {
                renderReports();
            }
        }
        
        // ã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³ã‚’å‹•çš„ç”Ÿæˆ
        function renderActivityQuickButtons() {
            const container = document.getElementById('activityQuickButtons');
            container.innerHTML = activityCategories.map(cat => 
                `<button class="quick-button" data-category="${cat.name}" data-emoji="${cat.emoji}" onclick="selectCategory('${cat.name}', '${cat.emoji}')">${cat.emoji} ${cat.name}</button>`
            ).join('');
        }
        
        // ã‚«ãƒ†ã‚´ãƒªé¸æŠï¼ˆã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³ï¼‰
        function selectCategory(categoryName, categoryEmoji) {
            selectedCategory = categoryName;
            selectedCategoryEmoji = categoryEmoji;
            
            // ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.quick-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            const selectedButton = document.querySelector(`.quick-button[data-category="${categoryName}"]`);
            if (selectedButton) {
                selectedButton.classList.add('selected');
            }
            
            // å…¥åŠ›æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
            document.getElementById('activityInput').focus();
        }
        
        // ã‚¯ã‚¤ãƒƒã‚¯è¿½åŠ ï¼šãŠé‡‘
        function quickAddMoney(category, amount) {
            document.getElementById('moneyInput').value = category;
            document.getElementById('moneyAmount').value = Math.abs(amount);
            addMoney();
        }
        
        // è¡Œå‹•ã‚’è¨˜éŒ²
        function addActivity() {
            const input = document.getElementById('activityInput');
            const text = input.value.trim();
            
            // ã‚«ãƒ†ã‚´ãƒªé¸æŠãƒã‚§ãƒƒã‚¯ï¼ˆå¿…é ˆï¼‰
            if (!selectedCategory) {
                showStatus('activityStatus', 'âŒ ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            if (!text) {
                showStatus('activityStatus', 'âŒ å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // æ™‚é–“ã‚’å–å¾—
            let durationMinutes = 0;
            
            // ã‚¿ã‚¤ãƒãƒ¼ã‹ã‚‰å–å¾—
            if (timerElapsedSeconds > 0) {
                durationMinutes = Math.round(timerElapsedSeconds / 60);
            }
            // æ‰‹å‹•å…¥åŠ›ã‹ã‚‰å–å¾—
            else {
                const hours = parseInt(document.getElementById('hourInput').value) || 0;
                const minutes = parseInt(document.getElementById('minuteInput').value) || 0;
                durationMinutes = hours * 60 + minutes;
            }
            
            const record = {
                id: Date.now(),
                category: selectedCategory,
                categoryEmoji: selectedCategoryEmoji,
                text: text,
                durationMinutes: durationMinutes,
                timestamp: new Date().toISOString()
            };
            
            activities.unshift(record);
            localStorage.setItem('activities', JSON.stringify(activities));
            
            input.value = '';
            document.getElementById('hourInput').value = '';
            document.getElementById('minuteInput').value = '';
            
            // ã‚¿ã‚¤ãƒãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
            if (timerRunning) {
                toggleTimer();
            }
            resetTimer();
            
            // ã‚«ãƒ†ã‚´ãƒªé¸æŠã‚’ãƒªã‚»ãƒƒãƒˆ
            selectedCategory = null;
            selectedCategoryEmoji = null;
            document.querySelectorAll('.quick-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            showStatus('activityStatus', 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸ');
            renderActivityLogs();
        }
        
        // ãŠé‡‘ã‚’è¨˜éŒ²
        function addMoney() {
            const input = document.getElementById('moneyInput');
            const amountInput = document.getElementById('moneyAmount');
            const text = input.value.trim();
            const amount = parseFloat(amountInput.value);
            
            if (!text || isNaN(amount)) {
                showStatus('moneyStatus', 'âŒ å†…å®¹ã¨é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const record = {
                id: Date.now(),
                text: text,
                amount: amount,
                timestamp: new Date().toISOString()
            };
            
            moneyRecords.unshift(record);
            localStorage.setItem('moneyRecords', JSON.stringify(moneyRecords));
            
            input.value = '';
            amountInput.value = '';
            showStatus('moneyStatus', 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸ');
            renderMoneyLogs();
        }
        
        // ä½“é‡ã‚’è¨˜éŒ²
        function addWeight() {
            const input = document.getElementById('weightInput');
            const weight = parseFloat(input.value);
            
            if (isNaN(weight) || weight <= 0) {
                showStatus('weightStatus', 'âŒ æ­£ã—ã„ä½“é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const record = {
                id: Date.now(),
                weight: weight,
                timestamp: new Date().toISOString()
            };
            
            weightRecords.unshift(record);
            localStorage.setItem('weightRecords', JSON.stringify(weightRecords));
            
            input.value = '';
            showStatus('weightStatus', 'âœ“ è¨˜éŒ²ã—ã¾ã—ãŸ');
            renderWeightLogs();
        }
        
        // ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«è‡ªå‹•è¦ç´„
        function analyzJournal(text) {
            const analysis = {
                good: [],
                more: [],
                worry: [],
                task: []
            };
            
            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å®šç¾©
            const keywords = {
                good: ['è‰¯ã‹ã£ãŸ', 'å¬‰ã—ã„', 'æ¥½ã—ã„', 'æˆåŠŸ', 'é”æˆ', 'ã§ããŸ', 'ã‚ˆã‹ã£ãŸ', 'é ‘å¼µã£ãŸ', 'å……å®Ÿ', 'æº€è¶³', 'æ°—æŒã¡ã„ã„', 'æ°—æŒã¡ã‚ˆã', 'é †èª¿'],
                more: ['ã‚‚ã£ã¨', 'æ”¹å–„', 'æ¬¡ã¯', 'ã“ã‚Œã‹ã‚‰', 'é ‘å¼µ', 'ç›®æ¨™', 'ãƒãƒ£ãƒ¬ãƒ³ã‚¸', 'å‘ä¸Š', 'ã‚ˆã‚Š'],
                worry: ['æ‚©', 'å›°', 'é›£ã—ã„', 'ã†ã¾ãã„ã‹ãªã„', 'å¤±æ•—', 'å¿ƒé…', 'ä¸å®‰', 'ã§ããªã„', 'ã‚ã‹ã‚‰ãªã„', 'å¤§å¤‰'],
                task: ['æ˜æ—¥', 'ã‚„ã‚‹', 'ã™ã‚‹', 'è¡Œã', 'ä¼šã†', 'äºˆå®š', 'ã‚¿ã‚¹ã‚¯', 'todo', 'æº–å‚™', 'è¨ˆç”»']
            };
            
            const sentences = text.split(/[ã€‚ï¼\n]/);
            
            sentences.forEach(sentence => {
                sentence = sentence.trim();
                if (!sentence) return;
                
                let classified = false;
                
                // Good
                if (keywords.good.some(kw => sentence.includes(kw))) {
                    analysis.good.push(sentence);
                    classified = true;
                }
                
                // More
                if (keywords.more.some(kw => sentence.includes(kw))) {
                    analysis.more.push(sentence);
                    classified = true;
                }
                
                // Worry
                if (keywords.worry.some(kw => sentence.includes(kw))) {
                    analysis.worry.push(sentence);
                    classified = true;
                }
                
                // Task
                if (keywords.task.some(kw => sentence.includes(kw))) {
                    analysis.task.push(sentence);
                    classified = true;
                }
            });
            
            return analysis;
        }
        
        // AIã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
        function generateAIComment(category, items) {
            if (items.length === 0) {
                return '';
            }
            
            const comments = {
                good: [
                    'ç´ æ™´ã‚‰ã—ã„1æ—¥ã§ã™ã­ï¼ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå‡ºæ¥äº‹ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã—ãŸã€‚ã“ã®èª¿å­ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ï¼',
                    'ã¨ã¦ã‚‚å……å®Ÿã—ãŸæ™‚é–“ã‚’éã”ã›ã¾ã—ãŸã­ã€‚ã“ã†ã—ãŸè‰¯ã„çµŒé¨“ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚',
                    'è‰¯ã„ã“ã¨ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã—ãŸã­ï¼ã“ã®å‰å‘ããªæ°—æŒã¡ã‚’æ˜æ—¥ã‚‚å¤§åˆ‡ã«ã—ã¦ãã ã•ã„ã€‚',
                    'ç´ æ•µãª1æ—¥ã§ã—ãŸã­ã€‚å°ã•ãªå–œã³ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹ã‚ãªãŸã®å§¿å‹¢ãŒç´ æ™´ã‚‰ã—ã„ã§ã™ã€‚'
                ],
                more: [
                    'å‘ä¸Šå¿ƒãŒç´ æ™´ã‚‰ã—ã„ã§ã™ï¼ä¸€æ­©ãšã¤å‰é€²ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚',
                    'æ”¹å–„ç‚¹ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹ã“ã¨ã¯æˆé•·ã®è¨¼ã§ã™ã€‚å°‘ã—ãšã¤å–ã‚Šçµ„ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚',
                    'æ¬¡ã¸ã®æ„æ¬²ãŒæ„Ÿã˜ã‚‰ã‚Œã¾ã™ã€‚è¨ˆç”»çš„ã«é€²ã‚ã‚Œã°ã€ãã£ã¨é”æˆã§ãã¾ã™ã‚ˆã€‚',
                    'ã‚ˆã‚Šè‰¯ãã—ã‚ˆã†ã¨ã™ã‚‹å§¿å‹¢ãŒç´ æ™´ã‚‰ã—ã„ã§ã™ã€‚ç„¦ã‚‰ãšã€ç¢ºå®Ÿã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚'
                ],
                worry: [
                    'æ‚©ã¿ã‚’è¨€èªåŒ–ã§ããŸã“ã¨è‡ªä½“ãŒç¬¬ä¸€æ­©ã§ã™ã€‚ä¸€ç·’ã«è§£æ±ºç­–ã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚',
                    'ä¸å®‰ãªæ°—æŒã¡ã¯è‡ªç„¶ãªã“ã¨ã§ã™ã€‚ä¸€ã¤ãšã¤æ•´ç†ã—ã¦ã„ã‘ã°ã€é“ã¯é–‹ã‘ã¾ã™ã€‚',
                    'å›°é›£ãªçŠ¶æ³ã§ã‚‚å‰ã‚’å‘ã„ã¦ã„ã‚‹ã‚ãªãŸã¯ç´ æ™´ã‚‰ã—ã„ã§ã™ã€‚å¿œæ´ã—ã¦ã„ã¾ã™ã€‚',
                    'æ‚©ã¿ã‚’æŠ±ãˆãªãŒã‚‰ã‚‚è¨˜éŒ²ã§ããŸã“ã¨ãŒç´ æ™´ã‚‰ã—ã„ã€‚å°‘ã—ãšã¤è§£æ±ºã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚'
                ],
                task: [
                    'æ˜ç¢ºãªè¡Œå‹•è¨ˆç”»ãŒã‚ã‚‹ã®ã¯ç´ æ™´ã‚‰ã—ã„ã§ã™ï¼ä¸€ã¤ãšã¤ã‚¯ãƒªã‚¢ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚',
                    'å…·ä½“çš„ãªã‚¿ã‚¹ã‚¯ã‚’è¨­å®šã§ãã¾ã—ãŸã­ã€‚å®Ÿè¡Œã«ç§»ã™ã“ã¨ã§å‰é€²ã§ãã¾ã™ã€‚',
                    'ã‚„ã‚‹ã¹ãã“ã¨ãŒæ˜ç¢ºã«ãªã‚Šã¾ã—ãŸã€‚å„ªå…ˆé †ä½ã‚’ã¤ã‘ã¦å–ã‚Šçµ„ã¿ã¾ã—ã‚‡ã†ã€‚',
                    'è¡Œå‹•ãƒªã‚¹ãƒˆãŒã§ãã¾ã—ãŸã­ã€‚å°ã•ãªä¸€æ­©ã‹ã‚‰å§‹ã‚ã¦ã¿ã¦ãã ã•ã„ã€‚'
                ]
            };
            
            const categoryComments = comments[category];
            return categoryComments[Math.floor(Math.random() * categoryComments.length)];
        }
        
        // ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã‚’ä¿å­˜
        function addJournal() {
            const input = document.getElementById('journalInput');
            const text = input.value.trim();
            
            if (!text) {
                showStatus('journalStatus', 'âŒ å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // è‡ªå‹•è¦ç´„
            const analysis = analyzJournal(text);
            
            const record = {
                id: Date.now(),
                text: text,
                mood: selectedMood,
                summary: analysis,
                timestamp: new Date().toISOString()
            };
            
            // ä»Šæ—¥ã®æ—¥ä»˜ã®ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã‚’ä¸Šæ›¸ãç¢ºèª
            const today = new Date().toLocaleDateString('ja-JP');
            const existingIndex = journals.findIndex(j => 
                new Date(j.timestamp).toLocaleDateString('ja-JP') === today
            );
            
            if (existingIndex >= 0) {
                if (confirm('ä»Šæ—¥ã®ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚ä¸Šæ›¸ãã—ã¾ã™ã‹ï¼Ÿ')) {
                    journals[existingIndex] = record;
                } else {
                    return;
                }
            } else {
                journals.unshift(record);
            }
            
            localStorage.setItem('journals', JSON.stringify(journals));
            
            input.value = '';
            document.getElementById('summarySection').classList.remove('active');
            
            // æ°—åˆ†é¸æŠã‚’ãƒªã‚»ãƒƒãƒˆ
            selectedMood = 'normal';
            document.querySelectorAll('.mood-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            showStatus('journalStatus', 'âœ“ ä¿å­˜ã—ã¾ã—ãŸ');
            renderJournalLogs();
            renderCalendar();
        }
        
        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
        function showStatus(elementId, message) {
            const statusEl = document.getElementById(elementId);
            statusEl.textContent = message;
            setTimeout(() => {
                statusEl.textContent = '';
            }, 3000);
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šè¡Œå‹•
// è¡Œå‹•ãƒ­ã‚°è¡¨ç¤ºï¼ˆç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³ä»˜ãï¼‰
function renderActivityLogs() {
    const container = document.getElementById('activityLogs');
    const today = new Date().toLocaleDateString('ja-JP');
    const todayActivities = activities.filter(a => 
        new Date(a.timestamp).toLocaleDateString('ja-JP') === today
    );
    
    if (todayActivities.length === 0) {
        container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
        return;
    }
    
    container.innerHTML = todayActivities.map(record => {
        // ã‚«ãƒ†ã‚´ãƒªè¡¨ç¤º
        let categoryText = '';
        if (record.category && record.categoryEmoji) {
            categoryText = `${record.categoryEmoji} ${record.category}: `;
        } else if (record.category) {
            categoryText = `${record.category}: `;
        }
        
        // æ™‚é–“è¡¨ç¤ºã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã«1è¡Œã«ï¼‰
        let durationText = '';
        if (record.durationMinutes > 0) {
            const hours = Math.floor(record.durationMinutes / 60);
            const minutes = record.durationMinutes % 60;
            if (hours > 0 && minutes > 0) {
                durationText = ` <span style="color: #4CAF50;">â±ï¸ ${hours}h ${minutes}m</span>`;
            } else if (hours > 0) {
                durationText = ` <span style="color: #4CAF50;">â±ï¸ ${hours}h</span>`;
            } else {
                durationText = ` <span style="color: #4CAF50;">â±ï¸ ${minutes}m</span>`;
            }
        }
        
        return `
            <div class="log-item">
                <div>
                    <strong>${categoryText}${record.text}</strong>${durationText}
                    <br>
                    <small>${new Date(record.timestamp).toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'})}</small>
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="editActivity(${record.id})" style="padding: 5px 10px; background: #000; color: #fff; border: none; border-radius: 5px; cursor: pointer;">ç·¨é›†</button>
                    <button onclick="deleteActivity(${record.id})" style="padding: 5px 10px; background: #dc3545; color: #fff; border: none; border-radius: 5px; cursor: pointer;">å‰Šé™¤</button>
                </div>
            </div>
        `;
    }).join('');
}
        // è¡Œå‹•ç·¨é›†
        // ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è€ƒæ…®ã—ãŸdatetime-localå½¢å¼ã¸å¤‰æ›
        function formatDateTimeLocal(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }
        
        // è¡Œå‹•ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        function editActivity(id) {
            const activity = activities.find(a => a.id === id);
            if (!activity) return;
            
            editingActivityId = id;
            
            // ã‚«ãƒ†ã‚´ãƒªã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆ
            const categorySelect = document.getElementById('editActivityCategory');
            categorySelect.innerHTML = activityCategories.map(cat => 
                `<option value="${cat.name}" ${activity.category === cat.name ? 'selected' : ''}>${cat.emoji} ${cat.name}</option>`
            ).join('');
            
            // å†…å®¹ã‚’è¨­å®š
            document.getElementById('editActivityText').value = activity.text || '';
            
            // é–‹å§‹æ™‚åˆ»ã‚’è¨­å®šï¼ˆtimestampã‹ã‚‰è¨ˆç®—ï¼‰
            const activityDate = new Date(activity.timestamp);
            
            // çµ‚äº†æ™‚åˆ»ãŒã‚ã‚‹å ´åˆã¯ã€durationMinutesã‹ã‚‰è¨ˆç®—ã—ã¦é–‹å§‹æ™‚åˆ»ã‚’é€†ç®—
            let startTime, endTime;
            if (activity.durationMinutes > 0) {
                // çµ‚äº†æ™‚åˆ» = timestampï¼ˆè¨˜éŒ²æ™‚åˆ»ï¼‰
                endTime = new Date(activity.timestamp);
                // é–‹å§‹æ™‚åˆ» = çµ‚äº†æ™‚åˆ» - duration
                startTime = new Date(endTime.getTime() - activity.durationMinutes * 60000);
            } else {
                // durationãŒãªã„å ´åˆã¯ã€timestampã‚’é–‹å§‹æ™‚åˆ»ã¨ã™ã‚‹
                startTime = activityDate;
                endTime = null;
            }
            
            document.getElementById('editActivityStartTime').value = formatDateTimeLocal(startTime);
            document.getElementById('editActivityEndTime').value = endTime ? formatDateTimeLocal(endTime) : '';
            
            document.getElementById('editActivityModal').classList.add('active');
        }
        
        // è¡Œå‹•ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeEditActivityModal() {
            document.getElementById('editActivityModal').classList.remove('active');
            editingActivityId = null;
        }
        
        // è¡Œå‹•ç·¨é›†ã‚’ä¿å­˜
        function saveEditActivity() {
            const activity = activities.find(a => a.id === editingActivityId);
            if (!activity) return;
            
            const category = document.getElementById('editActivityCategory').value;
            const text = document.getElementById('editActivityText').value.trim();
            const startTimeStr = document.getElementById('editActivityStartTime').value;
            const endTimeStr = document.getElementById('editActivityEndTime').value;
            
            if (!category) {
                showStatus('activityStatus', 'âŒ ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            if (!text) {
                showStatus('activityStatus', 'âŒ å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            if (!startTimeStr) {
                showStatus('activityStatus', 'âŒ é–‹å§‹æ™‚åˆ»ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’æ›´æ–°
            const selectedCat = activityCategories.find(cat => cat.name === category);
            activity.category = category;
            activity.categoryEmoji = selectedCat ? selectedCat.emoji : '';
            activity.text = text;
            
            // æ™‚é–“ã‚’è¨ˆç®—
            const startTime = new Date(startTimeStr);
            if (endTimeStr) {
                const endTime = new Date(endTimeStr);
                const durationMs = endTime.getTime() - startTime.getTime();
                activity.durationMinutes = Math.round(durationMs / 60000);
                // timestampã¯çµ‚äº†æ™‚åˆ»ã«ã™ã‚‹
                activity.timestamp = endTime.toISOString();
            } else {
                // çµ‚äº†æ™‚åˆ»ãŒãªã„å ´åˆã¯ç¶™ç¶šä¸­
                activity.durationMinutes = 0;
                activity.timestamp = startTime.toISOString();
            }
            
            localStorage.setItem('activities', JSON.stringify(activities));
            renderActivityLogs();
            closeEditActivityModal();
            showStatus('activityStatus', 'âœ“ æ›´æ–°ã—ã¾ã—ãŸ');
        }
            if (confirm('ã“ã®è¡Œå‹•ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                activities = activities.filter(a => a.id !== id);
                localStorage.setItem('activities', JSON.stringify(activities));
                renderActivityLogs();
            }
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šãŠé‡‘
        function renderMoneyLogs() {
            const container = document.getElementById('moneyLogs');
            const today = new Date().toLocaleDateString('ja-JP');
            const todayMoney = moneyRecords.filter(m => 
                new Date(m.timestamp).toLocaleDateString('ja-JP') === today
            );
            
            if (todayMoney.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            const total = todayMoney.reduce((sum, r) => sum + r.amount, 0);
            
            container.innerHTML = `
                <div class="log-item" style="background: ${total >= 0 ? '#f0f8ff' : '#fff5f5'};">
                    <strong>ä»Šæ—¥ã®åæ”¯: Â¥${total.toLocaleString()}</strong>
                </div>
            ` + todayMoney.map(record => `
                <div class="log-item">
                    <strong>${record.text}</strong> - Â¥${record.amount.toLocaleString()}
                    <br>
                    <small>${new Date(record.timestamp).toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'})}</small>
                </div>
            `).join('');
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šä½“é‡
        function renderWeightLogs() {
            const container = document.getElementById('weightLogs');
            if (weightRecords.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            const recent = weightRecords.slice(0, 10);
            container.innerHTML = recent.map(record => `
                <div class="log-item">
                    <strong>${record.weight} kg</strong>
                    <br>
                    <small>${new Date(record.timestamp).toLocaleString('ja-JP', {month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'})}</small>
                </div>
            `).join('');
        }
        
        // ãƒ­ã‚°è¡¨ç¤ºï¼šã‚¸ãƒ£ãƒ¼ãƒŠãƒ«
        function renderJournalLogs() {
            const container = document.getElementById('journalLogs');
            if (journals.length === 0) {
                container.innerHTML = '<div class="log-item">è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            const recent = journals.slice(0, 5);
            container.innerHTML = recent.map(record => {
                const date = new Date(record.timestamp);
                return `
                    <div class="log-item">
                        <div style="font-weight: 600; margin-bottom: 5px;">
                            ${date.toLocaleDateString('ja-JP', {year: 'numeric', month: 'long', day: 'numeric'})}
                        </div>
                        <div style="white-space: pre-wrap;">${record.text.substring(0, 100)}${record.text.length > 100 ? '...' : ''}</div>
                    </div>
                `;
            }).join('');
        }
        
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
        function renderCalendar() {
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            
            document.getElementById('calendarMonth').textContent = 
                `${year}å¹´ ${month + 1}æœˆ`;
            
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            let html = '';
            ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'].forEach(day => {
                html += `<div class="calendar-day-header">${day}</div>`;
            });
            
            for (let i = 0; i < firstDay; i++) {
                html += '<div class="calendar-day empty"></div>';
            }
            
            for (let date = 1; date <= lastDate; date++) {
                const currentDate = new Date(year, month, date);
                const dateStr = currentDate.toLocaleDateString('ja-JP');
                
                // ãã®æ—¥ã®ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã‚’å–å¾—
                const journal = journals.find(j => 
                    new Date(j.timestamp).toLocaleDateString('ja-JP') === dateStr
                );
                const hasJournal = !!journal;
                
                const isToday = 
                    today.getFullYear() === year &&
                    today.getMonth() === month &&
                    today.getDate() === date;
                
                let className = 'calendar-day';
                if (isToday) className += ' today';
                if (hasJournal) className += ' has-journal';
                
                // æ°—åˆ†çµµæ–‡å­—ã‚’è¿½åŠ 
                let moodEmoji = '';
                if (journal && journal.mood) {
                    moodEmoji = `<div class="calendar-day-mood">${moodEmojis[journal.mood]}</div>`;
                }
                
                html += `<div class="${className}" onclick="viewJournalByDate('${dateStr}')">${date}${moodEmoji}</div>`;
            }
            
            document.getElementById('calendar').innerHTML = html;
        }
        
        function changeMonth(delta) {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
            renderCalendar();
        }
        
        function viewJournalByDate(dateStr) {
            const journal = journals.find(j => 
                new Date(j.timestamp).toLocaleDateString('ja-JP') === dateStr
            );
            
            if (journal) {
                const moodText = journal.mood ? `\n\næ°—åˆ†: ${moodEmojis[journal.mood]}` : '';
                alert(`${dateStr}ã®ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«:${moodText}\n\n${journal.text}`);
            } else {
                alert(`${dateStr}ã«ã¯ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚`);
            }
        }
        
        // ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º
        function renderReports() {
            // çµ±è¨ˆ
            document.getElementById('totalActivities').textContent = activities.length;
            
            const totalMoney = moneyRecords.reduce((sum, r) => sum + r.amount, 0);
            document.getElementById('totalMoney').textContent = `Â¥${totalMoney.toLocaleString()}`;
            
            document.getElementById('totalJournals').textContent = journals.length;
            
            if (weightRecords.length > 0) {
                const avgWeight = weightRecords.reduce((sum, r) => sum + r.weight, 0) / weightRecords.length;
                document.getElementById('avgWeight').textContent = avgWeight.toFixed(1) + ' kg';
            }
            
            // è¡Œå‹•ãƒãƒ£ãƒ¼ãƒˆ
            renderActivityChart();
            
            // æ°—åˆ†ãƒãƒ£ãƒ¼ãƒˆ
            renderMoodChart();
            
            // ãŠé‡‘ãƒãƒ£ãƒ¼ãƒˆ
            renderMoneyChart();
            
            // ä½“é‡ãƒãƒ£ãƒ¼ãƒˆ
            renderWeightChart();
            
            // AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            renderAIFeedback();
        }
        
        function renderActivityChart() {
            const ctx = document.getElementById('activityChart');
            if (!ctx) return;
            
            const categoryCounts = {};
            activityCategories.forEach(cat => {
                categoryCounts[cat.name] = activities.filter(a => a.text.includes(cat.name)).length;
            });
            
            if (window.activityChartInstance) {
                window.activityChartInstance.destroy();
            }
            
            window.activityChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(categoryCounts),
                    datasets: [{
                        label: 'å›æ•°',
                        data: Object.values(categoryCounts),
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        borderColor: 'rgba(0, 0, 0, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
        
        function renderMoodChart() {
            const ctx = document.getElementById('moodChart');
            if (!ctx) return;
            
            // æ°—åˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆ
            const moodCounts = {
                great: 0,
                good: 0,
                normal: 0,
                bad: 0,
                terrible: 0
            };
            
            journals.forEach(j => {
                if (j.mood && moodCounts.hasOwnProperty(j.mood)) {
                    moodCounts[j.mood]++;
                }
            });
            
            const moodLabels = {
                great: 'ğŸ˜Š æœ€é«˜',
                good: 'ğŸ™‚ è‰¯ã„',
                normal: 'ğŸ˜ æ™®é€š',
                bad: 'ğŸ˜” æ‚ªã„',
                terrible: 'ğŸ˜¢ æœ€æ‚ª'
            };
            
            if (window.moodChartInstance) {
                window.moodChartInstance.destroy();
            }
            
            window.moodChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(moodCounts).map(k => moodLabels[k]),
                    datasets: [{
                        data: Object.values(moodCounts),
                        backgroundColor: [
                            'rgba(76, 175, 80, 0.8)',   // great - green
                            'rgba(139, 195, 74, 0.8)',  // good - light green
                            'rgba(158, 158, 158, 0.8)', // normal - grey
                            'rgba(255, 152, 0, 0.8)',   // bad - orange
                            'rgba(244, 67, 54, 0.8)'    // terrible - red
                        ],
                        borderColor: [
                            'rgba(76, 175, 80, 1)',
                            'rgba(139, 195, 74, 1)',
                            'rgba(158, 158, 158, 1)',
                            'rgba(255, 152, 0, 1)',
                            'rgba(244, 67, 54, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        function renderMoneyChart() {
            const ctx = document.getElementById('moneyChart');
            if (!ctx) return;
            
            const last7Days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                last7Days.push(date.toLocaleDateString('ja-JP', {month: 'short', day: 'numeric'}));
            }
            
            const data = last7Days.map(dateStr => {
                const dayRecords = moneyRecords.filter(r => {
                    const recordDate = new Date(r.timestamp).toLocaleDateString('ja-JP', {month: 'short', day: 'numeric'});
                    return recordDate === dateStr;
                });
                return dayRecords.reduce((sum, r) => sum + r.amount, 0);
            });
            
            if (window.moneyChartInstance) {
                window.moneyChartInstance.destroy();
            }
            
            window.moneyChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: last7Days,
                    datasets: [{
                        label: 'åæ”¯ï¼ˆå††ï¼‰',
                        data: data,
                        borderColor: 'rgba(0, 0, 0, 1)',
                        backgroundColor: 'rgba(0, 0, 0, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true
                        }
                    }
                }
            });
        }
        
        function renderWeightChart() {
            const ctx = document.getElementById('weightChart');
            if (!ctx) return;
            
            const recent = weightRecords.slice(0, 10).reverse();
            
            if (window.weightChartInstance) {
                window.weightChartInstance.destroy();
            }
            
            window.weightChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: recent.map(r => new Date(r.timestamp).toLocaleDateString('ja-JP', {month: 'short', day: 'numeric'})),
                    datasets: [{
                        label: 'ä½“é‡ï¼ˆkgï¼‰',
                        data: recent.map(r => r.weight),
                        borderColor: 'rgba(0, 0, 0, 1)',
                        backgroundColor: 'rgba(0, 0, 0, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true
                        }
                    }
                }
            });
        }
        
        
        // AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆ
        function renderAIFeedback() {
            const today = new Date();
            const sevenDaysAgo = new Date(today);
            sevenDaysAgo.setDate(today.getDate() - 7);
            
            const recentActivities = activities.filter(a => new Date(a.timestamp) >= sevenDaysAgo);
            const recentJournals = journals.filter(j => new Date(j.timestamp) >= sevenDaysAgo);
            const recentMoney = moneyRecords.filter(m => new Date(m.timestamp) >= sevenDaysAgo);
            
            const recordedDates = new Set();
            [...recentActivities, ...recentJournals, ...recentMoney].forEach(record => {
                const date = new Date(record.timestamp).toLocaleDateString('ja-JP');
                recordedDates.add(date);
            });
            
            const recordedDays = recordedDates.size;
            
            const categoryCounts = {};
            activityCategories.forEach(cat => {
                categoryCounts[cat.name] = recentActivities.filter(a => 
                    a.text.includes(cat.name)
                ).length;
            });
            
            const topCategories = Object.entries(categoryCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3)
                .filter(([, count]) => count > 0);
            
            // æ™‚é–“çµ±è¨ˆã‚’è¿½åŠ 
            const totalMinutes = recentActivities.reduce((sum, a) => sum + (a.durationMinutes || 0), 0);
            const totalHours = Math.floor(totalMinutes / 60);
            const remainingMinutes = totalMinutes % 60;
            
            // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æ™‚é–“çµ±è¨ˆ
            const categoryTimes = {};
            activityCategories.forEach(cat => {
                const categoryActivities = recentActivities.filter(a => a.text.includes(cat.name));
                const categoryMinutes = categoryActivities.reduce((sum, a) => sum + (a.durationMinutes || 0), 0);
                if (categoryMinutes > 0) {
                    categoryTimes[cat.name] = {
                        emoji: cat.emoji,
                        hours: Math.floor(categoryMinutes / 60),
                        minutes: categoryMinutes % 60
                    };
                }
            });
            
            const moodCounts = {
                great: 0, good: 0, normal: 0, bad: 0, terrible: 0
            };
            
            recentJournals.forEach(j => {
                if (j.mood && moodCounts.hasOwnProperty(j.mood)) {
                    moodCounts[j.mood]++;
                }
            });
            
            const totalMoods = Object.values(moodCounts).reduce((sum, count) => sum + count, 0);
            const positiveMoods = moodCounts.great + moodCounts.good;
            const negativeMoods = moodCounts.bad + moodCounts.terrible;
            
            const totalIncome = recentMoney.filter(m => m.amount > 0).reduce((sum, m) => sum + m.amount, 0);
            const totalExpense = recentMoney.filter(m => m.amount < 0).reduce((sum, m) => sum + m.amount, 0);
            const balance = totalIncome + totalExpense;
            
            let advice = [];
            
            // æ™‚é–“çµ±è¨ˆã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¿½åŠ 
            if (totalMinutes > 0) {
                if (totalHours > 0) {
                    advice.push(`â±ï¸ ä»Šé€±ã¯åˆè¨ˆ ${totalHours}æ™‚é–“${remainingMinutes > 0 ? remainingMinutes + 'åˆ†' : ''}ã‚’è¨˜éŒ²ã—ã¾ã—ãŸï¼`);
                } else {
                    advice.push(`â±ï¸ ä»Šé€±ã¯åˆè¨ˆ ${remainingMinutes}åˆ†ã‚’è¨˜éŒ²ã—ã¾ã—ãŸï¼`);
                }
            }
            
            if (recordedDays >= 5) {
                advice.push('ğŸ“Š ç´ æ™´ã‚‰ã—ã„ï¼ä»Šé€±ã¯' + recordedDays + 'æ—¥é–“è¨˜éŒ²ã‚’ç¶šã‘ã¦ã„ã¾ã™ã€‚ç¶™ç¶šã¯åŠ›ãªã‚Šã§ã™ã­ï¼');
            } else if (recordedDays >= 3) {
                advice.push('ğŸ“Š ä»Šé€±ã¯' + recordedDays + 'æ—¥é–“è¨˜éŒ²ã—ã¾ã—ãŸã€‚ã‚ã¨å°‘ã—ã§æ¯æ—¥è¨˜éŒ²é”æˆã§ã™ï¼');
            } else {
                advice.push('ğŸ“Š ä»Šé€±ã®è¨˜éŒ²ã¯' + recordedDays + 'æ—¥é–“ã§ã™ã€‚æ¯æ—¥å°‘ã—ãšã¤è¨˜éŒ²ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼');
            }
            
            if (topCategories.length > 0) {
                const topActivity = topCategories[0];
                advice.push('ğŸ¯ ä»Šé€±ã¯ã€Œ' + topActivity[0] + 'ã€ã‚’' + topActivity[1] + 'å›è¨˜éŒ²ã—ã¾ã—ãŸã€‚ç´ æ™´ã‚‰ã—ã„ï¼');
            }
            
            if (totalMoods > 0) {
                const positiveRate = Math.round((positiveMoods / totalMoods) * 100);
                if (positiveRate >= 70) {
                    advice.push('ğŸ˜Š ä»Šé€±ã®æ°—åˆ†ã¯ç´ æ™´ã‚‰ã—ã„ï¼' + positiveRate + '%ãŒãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ°—åˆ†ã§ã—ãŸã€‚');
                } else if (positiveRate >= 50) {
                    advice.push('ğŸ™‚ ä»Šé€±ã®æ°—åˆ†ã¯ã¾ãšã¾ãšã€‚' + positiveRate + '%ãŒãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ°—åˆ†ã§ã—ãŸã€‚');
                } else if (negativeMoods > positiveMoods) {
                    advice.push('ğŸ˜” ä»Šé€±ã¯å°‘ã—å¤§å¤‰ã§ã—ãŸã­ã€‚ç„¡ç†ã›ãšã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§é€²ã¿ã¾ã—ã‚‡ã†ã€‚');
                }
            }
            
            if (recentMoney.length > 0) {
                if (balance >= 0) {
                    advice.push('ğŸ’° ä»Šé€±ã®åæ”¯ã¯+' + balance.toLocaleString() + 'å††ã€‚ç´ æ™´ã‚‰ã—ã„ç®¡ç†ã§ã™ã­ï¼');
                } else {
                    advice.push('ğŸ’¸ ä»Šé€±ã®æ”¯å‡ºã¯' + Math.abs(balance).toLocaleString() + 'å††ã€‚æ¥é€±ã¯ç¯€ç´„ã‚’å¿ƒãŒã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚');
                }
            }
            
            let goals = [];
            
            if (recordedDays < 7) {
                goals.push('ğŸ“… æ¥é€±ã¯æ¯æ—¥è¨˜éŒ²ã‚’ç›®æŒ‡ã—ã¦ã¿ã¾ã—ã‚‡ã†');
            }
            
            if (topCategories.length > 0) {
                const topActivity = topCategories[0];
                goals.push('ğŸ¯ ã€Œ' + topActivity[0] + 'ã€ã‚’' + (topActivity[1] + 2) + 'å›ã‚„ã£ã¦ã¿ã‚‹');
            }
            
            if (recentActivities.filter(a => a.text.includes('é‹å‹•')).length < 3) {
                goals.push('ğŸƒ é€±3å›ä»¥ä¸Šã®é‹å‹•ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸');
            }
            
            if (recentJournals.length < 5) {
                goals.push('ğŸ“ é€±5å›ã®ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«è¨˜éŒ²ã‚’ç›®æŒ‡ã™');
            }
            
            if (balance < 0) {
                goals.push('ğŸ’° æ”¯å‡ºã‚’æ„è­˜ã—ã¦è¨˜éŒ²ã‚’ç¶šã‘ã‚‹');
            }
            
            const weeklyAnalysisHTML = `
                <p><strong>ğŸ“Š è¨˜éŒ²æ—¥æ•°:</strong> ${recordedDays}æ—¥ / 7æ—¥</p>
                ${recordedDays >= 5 ? '<p style="color: #28a745;">âœ¨ ç´ æ™´ã‚‰ã—ã„ç¶™ç¶šåŠ›ã§ã™ï¼</p>' : ''}
                ${recentActivities.length > 0 ? `<p><strong>ğŸ“ è¡Œå‹•è¨˜éŒ²:</strong> ${recentActivities.length}å›</p>` : ''}
                ${recentJournals.length > 0 ? `<p><strong>âœï¸ ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«:</strong> ${recentJournals.length}å›</p>` : ''}
            `;
            
            const behaviorPatternsHTML = topCategories.length > 0 ? `
                <p><strong>ãƒˆãƒƒãƒ—3æ´»å‹•:</strong></p>
                <ul>
                    ${topCategories.map(([name, count]) => `<li>${name}: ${count}å›</li>`).join('')}
                </ul>
                
                ${Object.keys(categoryTimes).length > 0 ? `
                    <p style="margin-top: 15px;"><strong>â±ï¸ ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æ™‚é–“:</strong></p>
                    <ul>
                        ${Object.entries(categoryTimes).map(([name, time]) => {
                            let timeStr = '';
                            if (time.hours > 0 && time.minutes > 0) {
                                timeStr = `${time.hours}æ™‚é–“${time.minutes}åˆ†`;
                            } else if (time.hours > 0) {
                                timeStr = `${time.hours}æ™‚é–“`;
                            } else {
                                timeStr = `${time.minutes}åˆ†`;
                            }
                            return `<li>${time.emoji} ${name}: ${timeStr}</li>`;
                        }).join('')}
                    </ul>
                ` : ''}
            ` : '<p>ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒå°‘ãªã„ãŸã‚ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã§ãã¾ã›ã‚“ã€‚</p>';
            
            const moodTrendsHTML = totalMoods > 0 ? `
                <p><strong>æ°—åˆ†ã®å†…è¨³:</strong></p>
                <ul>
                    ${moodCounts.great > 0 ? `<li>ğŸ˜Š æœ€é«˜: ${moodCounts.great}å›</li>` : ''}
                    ${moodCounts.good > 0 ? `<li>ğŸ™‚ è‰¯ã„: ${moodCounts.good}å›</li>` : ''}
                    ${moodCounts.normal > 0 ? `<li>ğŸ˜ æ™®é€š: ${moodCounts.normal}å›</li>` : ''}
                    ${moodCounts.bad > 0 ? `<li>ğŸ˜” æ‚ªã„: ${moodCounts.bad}å›</li>` : ''}
                    ${moodCounts.terrible > 0 ? `<li>ğŸ˜¢ æœ€æ‚ª: ${moodCounts.terrible}å›</li>` : ''}
                </ul>
            ` : '<p>ã¾ã ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã®è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ°—åˆ†ã‚’è¨˜éŒ²ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>';
            
            const aiAdviceHTML = advice.length > 0 ? 
                advice.map(a => `<p>ãƒ»${a}</p>`).join('') : 
                '<p>ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜éŒ²ã—ã¦ã€AIã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å—ã‘å–ã‚Šã¾ã—ã‚‡ã†ï¼</p>';
            
            const weeklyGoalsHTML = goals.length > 0 ? `
                <ul>
                    ${goals.map(g => `<li>${g}</li>`).join('')}
                </ul>
            ` : '<p>ç´ æ™´ã‚‰ã—ã„ï¼ã™ã¹ã¦ã®ç›®æ¨™ã‚’é”æˆã—ã¦ã„ã¾ã™ï¼</p>';
            
            document.getElementById('weeklyAnalysis').innerHTML = weeklyAnalysisHTML;
            document.getElementById('behaviorPatterns').innerHTML = behaviorPatternsHTML;
            document.getElementById('moodTrends').innerHTML = moodTrendsHTML;
            document.getElementById('aiAdvice').innerHTML = aiAdviceHTML;
            document.getElementById('weeklyGoals').innerHTML = weeklyGoalsHTML;
        }
        // ã‚«ãƒ†ã‚´ãƒªç®¡ç†
        // ã‚¿ã‚¤ãƒãƒ¼æ©Ÿèƒ½
        function toggleTimer() {
            if (timerRunning) {
                // åœæ­¢
                clearInterval(timerInterval);
                timerRunning = false;
                document.getElementById('timerButton').innerHTML = 'â–¶ï¸ ã‚¿ã‚¤ãƒãƒ¼å†é–‹';
                document.getElementById('timerButton').style.background = '#4CAF50';
            } else {
                // é–‹å§‹
                if (timerStartTime === null) {
                    timerStartTime = Date.now() - (timerElapsedSeconds * 1000);
                } else {
                    timerStartTime = Date.now() - (timerElapsedSeconds * 1000);
                }
                
                timerRunning = true;
                document.getElementById('timerButton').innerHTML = 'â¸ï¸ ä¸€æ™‚åœæ­¢';
                document.getElementById('timerButton').style.background = '#FF9800';
                
                timerInterval = setInterval(() => {
                    timerElapsedSeconds = Math.floor((Date.now() - timerStartTime) / 1000);
                    updateTimerDisplay();
                }, 100);
            }
        }
        
        function updateTimerDisplay() {
            const hours = Math.floor(timerElapsedSeconds / 3600);
            const minutes = Math.floor((timerElapsedSeconds % 3600) / 60);
            const seconds = timerElapsedSeconds % 60;
            
            const display = 
                String(hours).padStart(2, '0') + ':' +
                String(minutes).padStart(2, '0') + ':' +
                String(seconds).padStart(2, '0');
            
            document.getElementById('timerDisplay').textContent = display;
        }
        
        function resetTimer() {
            clearInterval(timerInterval);
            timerStartTime = null;
            timerRunning = false;
            timerElapsedSeconds = 0;
            document.getElementById('timerDisplay').textContent = '00:00:00';
            document.getElementById('timerButton').innerHTML = 'â–¶ï¸ ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹';
            document.getElementById('timerButton').style.background = '#4CAF50';
        }
        
        // ã‚«ãƒ†ã‚´ãƒªç®¡ç†
        function openCategoryManager() {
            document.getElementById('categoryModal').classList.add('active');
            renderCategoryList();
        }
        
        function closeCategoryManager() {
            document.getElementById('categoryModal').classList.remove('active');
        }
        
        function renderCategoryList() {
            const container = document.getElementById('categoryList');
            container.innerHTML = activityCategories.map((cat, index) => `
                <div class="log-item" style="display: flex; justify-content: space-between; align-items: center;">
                    <span>${cat.emoji} ${cat.name}</span>
                    <button onclick="deleteCategory(${index})" style="padding: 5px 10px; background: #ff4444; color: white; border: none; border-radius: 5px; cursor: pointer;">å‰Šé™¤</button>
                </div>
            `).join('');
        }
        
        function addCategory() {
            const nameInput = document.getElementById('newCategoryName');
            const emojiInput = document.getElementById('newCategoryEmoji');
            
            const name = nameInput.value.trim();
            const emoji = emojiInput.value.trim();
            
            if (!name || !emoji) {
                alert('åå‰ã¨çµµæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            activityCategories.push({ name, emoji });
            localStorage.setItem('activityCategories', JSON.stringify(activityCategories));
            
            nameInput.value = '';
            emojiInput.value = '';
            
            renderCategoryList();
            renderActivityQuickButtons();
        }
        
        function deleteCategory(index) {
            if (confirm('ã“ã®ã‚«ãƒ†ã‚´ãƒªã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                activityCategories.splice(index, 1);
                localStorage.setItem('activityCategories', JSON.stringify(activityCategories));
                renderCategoryList();
                renderActivityQuickButtons();
            }
        }
        
        // éŸ³å£°èªè­˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        function setupVoiceRecognition(buttonId, inputId, isJournal = false, isActivity = false) {
            const button = document.getElementById(buttonId);
            const input = document.getElementById(inputId);
            
            if (!button || !input) return;
            
            if (!('webkitSpeechRecognition' in window)) {
                button.disabled = true;
                button.textContent = 'éŸ³å£°èªè­˜ã¯éå¯¾å¿œã§ã™';
                return;
            }
            
            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'ja-JP';
            recognition.continuous = true;
            recognition.interimResults = true;
            
            let isListening = false;
            let finalTranscript = '';
            
            button.addEventListener('click', () => {
                if (isListening) {
                    recognition.stop();
                    button.classList.remove('listening');
                    button.textContent = button.textContent.replace('ğŸ”´ åœæ­¢', 'ğŸ¤ éŸ³å£°å…¥åŠ›');
                    isListening = false;
                } else {
                    finalTranscript = '';
                    recognition.start();
                    button.classList.add('listening');
                    button.textContent = button.textContent.replace('ğŸ¤ éŸ³å£°å…¥åŠ›', 'ğŸ”´ åœæ­¢');
                    isListening = true;
                }
            });
            
            recognition.onresult = (event) => {
                let interimTranscript = '';
                
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript;
                    } else {
                        interimTranscript += transcript;
                    }
                }
                
                const fullText = finalTranscript + interimTranscript;
                input.value = fullText;
                
                // è¡Œå‹•ã‚¿ãƒ–ã®å ´åˆã¯è‡ªå‹•çš„ã«ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œå‡ºã—ã¦é¸æŠ
                if (isActivity && fullText) {
                    autoSelectActivityCategory(fullText);
                }
                
                // ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã®å ´åˆã¯è‡ªå‹•è¦ç´„ã‚’è¡¨ç¤º
                if (isJournal && finalTranscript) {
                    const analysis = analyzJournal(fullText);
                    displaySummary(analysis);
                }
            };
            
            recognition.onerror = (event) => {
                console.error('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼:', event.error);
                button.classList.remove('listening');
                button.textContent = button.textContent.replace('ğŸ”´ åœæ­¢', 'ğŸ¤ éŸ³å£°å…¥åŠ›');
                isListening = false;
            };
            
            recognition.onend = () => {
                button.classList.remove('listening');
                button.textContent = button.textContent.replace('ğŸ”´ åœæ­¢', 'ğŸ¤ éŸ³å£°å…¥åŠ›');
                isListening = false;
            };
        }
        
        // éŸ³å£°å…¥åŠ›ã§è‡ªå‹•çš„ã«ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ
        function autoSelectActivityCategory(text) {
            // ãƒ†ã‚­ã‚¹ãƒˆã‚’å°æ–‡å­—åŒ–
            const lowerText = text.toLowerCase();
            
            // å„ã‚«ãƒ†ã‚´ãƒªã®ãƒãƒƒãƒãƒ³ã‚°ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
            let bestMatch = null;
            let bestMatchEmoji = null;
            let bestScore = 0;
            
            activityCategories.forEach(category => {
                const categoryName = category.name.toLowerCase();
                let score = 0;
                
                // ã‚«ãƒ†ã‚´ãƒªåãŒç›´æ¥å«ã¾ã‚Œã¦ã„ã‚‹ã‹
                if (lowerText.includes(categoryName)) {
                    score += 10;
                }
                
                // é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
                const keywords = getCategoryKeywords(category.name);
                keywords.forEach(keyword => {
                    if (lowerText.includes(keyword)) {
                        score += 5;
                    }
                });
                
                if (score > bestScore) {
                    bestScore = score;
                    bestMatch = category.name;
                    bestMatchEmoji = category.emoji;
                }
            });
            
            // ãƒãƒƒãƒã—ãŸã‚«ãƒ†ã‚´ãƒªãŒã‚ã‚Œã°ã€selectCategoryé–¢æ•°ã‚’å‘¼ã³å‡ºã—
            if (bestMatch && bestScore >= 5) {
                selectCategory(bestMatch, bestMatchEmoji);
            }
        }
        function getCategoryKeywords(categoryName) {
            const keywordMap = {
                'ä»•äº‹': ['ä¼šè­°', 'ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°', 'ãƒ—ãƒ¬ã‚¼ãƒ³', 'è³‡æ–™', 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ', 'æ¥­å‹™', 'ã‚ªãƒ•ã‚£ã‚¹', 'ä¼ç”»', 'å ±å‘Š', 'ãƒ¡ãƒ¼ãƒ«'],
                'å‹‰å¼·': ['å­¦ç¿’', 'å‹‰å¼·', 'èª­æ›¸', 'æœ¬', 'ã‚³ãƒ¼ã‚¹', 'è¬›åº§', 'ã‚»ãƒŸãƒŠãƒ¼', 'è©¦é¨“', 'ç ”ç©¶', 'å¾©ç¿’'],
                'é‹å‹•': ['ã‚¸ãƒ ', 'ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°', 'ã‚¸ãƒ§ã‚®ãƒ³ã‚°', 'ç­‹ãƒˆãƒ¬', 'ãƒ¨ã‚¬', 'ã‚¹ãƒãƒ¼ãƒ„', 'æ•£æ­©', 'ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°', 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ'],
                'é£Ÿäº‹': ['æœé£Ÿ', 'æ˜¨é£Ÿ', 'å¤•é£Ÿ', 'é£Ÿã¹', 'ãƒ©ãƒ³ãƒ', 'ãƒ‡ã‚£ãƒŠãƒ¼', 'æ–™ç†', 'é£Ÿäº‹', 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³', 'ã‚«ãƒ•ã‚§'],
                'ç¡çœ ': ['çœ ', 'å¯', 'ä»•äº‹', 'èµ·', 'ä¼‘æ¯', 'æ˜¨å¯', 'æœ', 'ç–²ã‚Œ'],
                'èª­æ›¸': ['æœ¬', 'å°èª¬', 'æ¼«ç”»', 'èª­ã‚“', 'é›‘èªŒ', 'è¨˜äº‹', 'ãƒ–ãƒƒã‚¯'],
                'å®¶äº‹': ['æƒé™¤', 'æ´—æ¿¯', 'æ–™ç†', 'ç‰‡ä»˜ã‘', 'è²·ã„ç‰©', 'ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°', 'æ•´ç†'],
                'è¶£å‘³': ['è¶£å‘³', 'ã‚²ãƒ¼ãƒ ', 'éŸ³æ¥½', 'æ˜ ç”»', 'ãƒ‰ãƒ©ãƒ', 'ã‚¢ãƒ‹ãƒ¡', 'çµµ', 'å†™çœŸ', 'ã‚«ãƒ©ã‚ªã‚±']
            };
            
            return keywordMap[categoryName] || [];
        }
        
        // ã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        
        // è¦ç´„ã‚’è¡¨ç¤º
        function displaySummary(analysis) {
            const summarySection = document.getElementById('summarySection');
            summarySection.classList.add('active');
            
            // Good
            const goodEl = document.getElementById('summaryGood');
            const goodCommentEl = document.getElementById('commentGood');
            if (analysis.good.length > 0) {
                goodEl.textContent = analysis.good.map(s => 'ãƒ»' + s).join('\n');
                goodCommentEl.textContent = generateAIComment('good', analysis.good);
            } else {
                goodEl.textContent = 'ï¼ˆãªã—ï¼‰';
                goodCommentEl.textContent = '';
            }
            
            // More
            const moreEl = document.getElementById('summaryMore');
            const moreCommentEl = document.getElementById('commentMore');
            if (analysis.more.length > 0) {
                moreEl.textContent = analysis.more.map(s => 'ãƒ»' + s).join('\n');
                moreCommentEl.textContent = generateAIComment('more', analysis.more);
            } else {
                moreEl.textContent = 'ï¼ˆãªã—ï¼‰';
                moreCommentEl.textContent = '';
            }
            
            // Worry
            const worryEl = document.getElementById('summaryWorry');
            const worryCommentEl = document.getElementById('commentWorry');
            if (analysis.worry.length > 0) {
                worryEl.textContent = analysis.worry.map(s => 'ãƒ»' + s).join('\n');
                worryCommentEl.textContent = generateAIComment('worry', analysis.worry);
            } else {
                worryEl.textContent = 'ï¼ˆãªã—ï¼‰';
                worryCommentEl.textContent = '';
            }
            
            // Task
            const taskEl = document.getElementById('summaryTask');
            const taskCommentEl = document.getElementById('commentTask');
            if (analysis.task.length > 0) {
                taskEl.textContent = analysis.task.map(s => 'ãƒ»' + s).join('\n');
                taskCommentEl.textContent = generateAIComment('task', analysis.task);
            } else {
                taskEl.textContent = 'ï¼ˆãªã—ï¼‰';
                taskCommentEl.textContent = '';
            }
        }
        
        // åˆæœŸåŒ–
        renderActivityQuickButtons();
        renderActivityLogs();
        renderMoneyLogs();
        renderWeightLogs();
        renderJournalLogs();
        renderCalendar();
        
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ°—åˆ†ã‚’é¸æŠçŠ¶æ…‹ã«
        selectMood('normal');
        
        setupVoiceRecognition('activityVoiceButton', 'activityInput', false, true);
        setupVoiceRecognition('moneyVoiceButton', 'moneyInput');
        setupVoiceRecognition('weightVoiceButton', 'weightInput');
        setupVoiceRecognition('journalVoiceButton', 'journalInput', true, false);
    </script>
</body>
</html>
                                                                         